<?xml version="1.0" encoding="UTF-8"?>
<project name="SchedVis" default="build" basedir=".">
  <property name="dir.bin" value="./bin" />
	<property name="dir.build" value="./build" />
  <property name="dir.src" value="./src" />
	<property name="dir.lib" value="/home/triceo/Work/school/SchedVis/lib" />
  <path id="classpath">
    <pathelement location="${java.class.path}"/>
  	<fileset dir="${dir.lib}">
  	  <include name="**/*.jar"/>
  	</fileset>
  	<pathelement location="${dir.src}" />
  </path>
	
	<target name="makejar" description="Create a jar for the SchedVis project">
    <mkdir dir="${dir.bin}" />
		<copy file="${dir.src}/log4j.xml" todir="${dir.build}" />
    <copy todir="${dir.build}/META-INF">
    	<fileset dir="${dir.src}/META-INF" />
    </copy>
	  <jar jarfile="${dir.bin}/SchedVis.jar" basedir="${dir.build}">
	  	<manifest>
	  		<attribute name="Main-Class" value="cz.muni.fi.spc.SchedVis.Main" />  	  
	  	</manifest>
	  </jar>
	</target>
	<target name="compile" description="Compile the classes.">
	  <mkdir dir="${dir.build}" />
		<javac srcdir="${dir.src}" destdir="${dir.build}" classpathref="classpath" source="1.5" nowarn="true" includeJavaRuntime="true" />
	</target>
	<target name="build" description="Build the SchedVis project">
    <antcall target="clean"></antcall>  
    <antcall target="compile"></antcall>  
		<antcall target="makejar"></antcall>
	</target>
	<target name="clean" description="Restore the distribution to its default state.">
		<delete dir="${dir.bin}" verbose="true" />
    <delete dir="${dir.build}" verbose="true" />
  </target>
	<target name="run" description="Run the program.">
		<java dir="./" jar="${dir.bin}/SchedVis.jar" classpathref="classpath" newenvironment="true">
			<sysproperty key="SQLite.library.path" value="${dir.lib}/i386"/>
		</java>
  </target>
</project>